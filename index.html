<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Rafa üíñ</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Gaegu:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --pink-light: #ffc2d1;
            --pink-main: #ff8fa3;
            --red-soft: #ff4d6d;
            --text-main: #590d22;
            --glass: rgba(255, 255, 255, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Fredoka', sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            color: var(--text-main);
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #ffd1ff, #a18cd1);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- FLOATING BACKGROUND --- */
        .bg-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floater {
            position: absolute;
            opacity: 0.6;
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        /* --- MAIN CARD --- */
        .card-container {
            position: relative;
            z-index: 10;
            width: 90%;
            max-width: 500px;
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 30px;
            border: 2px solid rgba(255,255,255,0.8);
            padding: 40px 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(89, 13, 34, 0.15);
            transition: all 0.5s ease;
        }

        h1 {
            font-family: 'Gaegu', cursive;
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            line-height: 1.1;
            margin-bottom: 20px;
            color: var(--red-soft);
            text-shadow: 2px 2px 0 #fff;
        }

        .panda-display {
            font-size: clamp(80px, 15vw, 120px);
            height: 140px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
            filter: drop-shadow(0 10px 15px rgba(0,0,0,0.1));
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* --- BUTTONS --- */
        .btn-group {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        button {
            border: none;
            border-radius: 50px;
            padding: 15px 40px;
            font-family: 'Fredoka', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 6px 0 rgba(0,0,0,0.1);
        }

        button:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .btn-yes {
            background: var(--red-soft);
            color: white;
            z-index: 5;
        }

        .btn-no {
            background: white;
            color: var(--text-main);
            border: 2px solid var(--red-soft);
        }

        /* --- MODAL POPUP --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(89, 13, 34, 0.4);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(4px);
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .modal-box {
            background: white;
            width: 85%;
            max-width: 350px;
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            border: 4px solid var(--pink-main);
        }

        .modal-overlay.active .modal-box {
            transform: scale(1);
        }

        .modal-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            font-family: 'Gaegu', cursive;
            font-weight: bold;
            line-height: 1.3;
        }

        .modal-btns button {
            width: 100%;
            margin-bottom: 10px;
            font-size: 1rem;
            padding: 12px;
        }

        /* --- CELEBRATION --- */
        .transition-text {
            position: fixed;
            font-family: 'Gaegu', cursive;
            font-size: 2rem;
            color: white;
            z-index: 200;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
        }

        .celebration-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, #ff9a9e 0%, #ff4d6d 100%);
            z-index: 300;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
        }

        .celebration-screen.active { opacity: 1; pointer-events: auto; }

        .celebration-screen h1 {
            color: white;
            font-size: clamp(2.5rem, 6vw, 5rem);
            text-shadow: 0 5px 15px rgba(0,0,0,0.2);
            text-align: center;
            margin: 0 20px;
        }

        .celebration-screen p {
            color: white;
            font-size: 1.5rem;
            font-family: 'Fredoka', sans-serif;
            margin-top: 10px;
        }

        /* --- LOVE STORM POPUPS --- */
        .love-popup {
            position: fixed;
            background: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-family: 'Gaegu', cursive;
            font-weight: bold;
            color: var(--red-soft);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 400;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            pointer-events: none;
            border: 2px solid var(--pink-main);
            white-space: nowrap;
        }

        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* --- ANIMATIONS --- */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px) rotate(-5deg); }
            75% { transform: translateX(8px) rotate(5deg); }
        }
        .shake-anim { animation: shake 0.4s ease-in-out; }
    </style>
</head>
<body>

    <!-- Audio Interaction Overlay -->
    <div id="interaction-overlay" style="position:fixed; top:0; left:0; width:100%; height:100%; z-index:9999;"></div>

    <!-- BACKGROUND PARTICLES -->
    <div class="bg-layer" id="bg-layer"></div>

    <!-- MAIN CARD -->
    <div class="card-container" id="main-card">
        <h1>Rafa...<br>Will you be my<br>Valentine?</h1>
        
        <div class="panda-display" id="panda">üêº</div>

        <div class="btn-group">
            <button class="btn-yes" id="yes-btn">YES üíò</button>
            <button class="btn-no" id="no-btn">NO üôÑ</button>
        </div>
    </div>

    <!-- MODAL POPUP -->
    <div class="modal-overlay" id="modal">
        <div class="modal-box">
            <div class="modal-text" id="modal-text">Think again.</div>
            <div class="modal-btns">
                <button onclick="closeModal()" style="background: var(--pink-main); color: white;">Let me rethink ü•∫</button>
                <button onclick="closeModal()" style="background: #eee; color: #555;">Continue</button>
            </div>
        </div>
    </div>

    <!-- TRANSITION TEXT -->
    <div class="transition-text" id="trans-text">Ahh... that's better.</div>

    <!-- CELEBRATION SCREEN -->
    <div class="celebration-screen" id="celebration">
        <h1>HAPPY VALENTINE'S DAY üíñ</h1>
        <p>I love you Rafa ‚ù§Ô∏è</p>
        <div style="font-size: 80px; margin-top: 30px; animation: popIn 1s infinite alternate;">üêºüçí‚ú®</div>
    </div>

    <script>
        // --- TEXT CONFIGURATION ---
        
        // 1. The exact sequence you requested
        const sequencePhrases = [
            "Rafa......?", 
            "Are you serious??", 
            "Bhai 7 bochor por eksathe valentine korbo!!!!"
        ];

        // 2. The Random Gen Z pool
        const randomPhrases = [
            "Think again.", "Bro really clicked no üíÄ", "Be serious.", "Rafa.exe stopped working.",
            "Villain arc starting?", "System error.", "Wrong answer.", "Try again.",
            "That‚Äôs illegal.", "Emotional damage detected.", "Are you sure?", "This button is fake."
        ];

        // 3. The Storm Messages (after YES)
        const loveMessages = [
            "I love you! üíñ", "I can't live without you üò≠", "7 Years!!! ‚ù§Ô∏è", 
            "You are my everything üåé", "Forever & Always ‚ú®", "My favorite person üêº",
            "Be mine forever üíç", "Best Valentine Ever üíò", "No escape now üòà",
            "Swarup ‚ù§Ô∏è Rafa", "Finally together ü•∞", "You're stuck with me",
            "My soulmate ‚ú®", "Cutie pie üçí"
        ];

        const pandaStates = ["üêº", "ü§®", "ü•∫", "üíî", "üò≠", "üò§", "üíÄ"];

        let clickCount = 0;
        let yesScale = 1;
        let audioCtx;

        // --- DOM ---
        const yesBtn = document.getElementById('yes-btn');
        const noBtn = document.getElementById('no-btn');
        const panda = document.getElementById('panda');
        const modal = document.getElementById('modal');
        const modalText = document.getElementById('modal-text');
        const mainCard = document.getElementById('main-card');
        const bgLayer = document.getElementById('bg-layer');

        // --- AUDIO ---
        function initAudio() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            if (audioCtx.state === 'suspended') audioCtx.resume();
        }

        function playSound(type) {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            const now = audioCtx.currentTime;

            if (type === 'error') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, now);
                osc.frequency.linearRampToValueAtTime(50, now + 0.3);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.3);
                osc.start(now);
                osc.stop(now + 0.3);
            } else {
                const notes = [440, 554, 659, 880];
                notes.forEach((f, i) => {
                    let o = audioCtx.createOscillator();
                    let g = audioCtx.createGain();
                    o.connect(g);
                    g.connect(audioCtx.destination);
                    o.type = 'sine';
                    o.frequency.value = f;
                    g.gain.setValueAtTime(0, now);
                    g.gain.linearRampToValueAtTime(0.05, now + 0.1);
                    g.gain.exponentialRampToValueAtTime(0.001, now + 2);
                    o.start(now + i*0.1);
                    o.stop(now + 2);
                });
            }
        }

        document.getElementById('interaction-overlay').addEventListener('click', function() {
            initAudio();
            this.remove();
        });

        // --- NO BUTTON LOGIC ---
        noBtn.addEventListener('click', () => {
            initAudio();
            playSound('error');
            clickCount++;

            // Shake
            document.body.classList.remove('shake-anim');
            void document.body.offsetWidth;
            document.body.classList.add('shake-anim');

            // Text Logic
            let message = "";
            if (clickCount <= sequencePhrases.length) {
                // Play the sequence first
                message = sequencePhrases[clickCount - 1];
            } else {
                // Then random
                message = randomPhrases[Math.floor(Math.random() * randomPhrases.length)];
            }
            
            modalText.innerText = message;
            
            // Panda Reaction
            const pIndex = Math.min(clickCount, pandaStates.length - 1);
            panda.innerText = pandaStates[pIndex];

            // Open Modal
            modal.classList.add('active');

            // Grow Yes
            yesScale += 0.2;
            yesBtn.style.transform = `scale(${yesScale})`;
        });

        window.closeModal = function() {
            modal.classList.remove('active');
        };

        // --- YES BUTTON LOGIC ---
        yesBtn.addEventListener('click', () => {
            initAudio();
            playSound('success');

            // Hide Main
            mainCard.style.opacity = '0';
            mainCard.style.pointerEvents = 'none';

            // Transition
            const transText = document.getElementById('trans-text');
            transText.style.opacity = '1';

            setTimeout(() => {
                transText.style.opacity = '0';
                startCelebration();
            }, 1200);
        });

        function startCelebration() {
            document.getElementById('celebration').classList.add('active');
            
            // 1. Confetti
            setInterval(createConfetti, 100);
            
            // 2. LOVE POPUP STORM (Starts after 1 second)
            setTimeout(() => {
                setInterval(createLovePopup, 300); // New popup every 300ms
            }, 1000);
        }

        // --- VFX GENERATORS ---
        function createConfetti() {
            const conf = document.createElement('div');
            conf.innerText = ['üçí', 'üíñ', '‚ú®', 'üéà'][Math.floor(Math.random()*4)];
            conf.style.position = 'fixed';
            conf.style.left = Math.random() * 100 + 'vw';
            conf.style.top = '-50px';
            conf.style.fontSize = Math.random() * 30 + 10 + 'px';
            conf.style.zIndex = '999';
            document.body.appendChild(conf);

            const duration = Math.random() * 3000 + 2000;
            conf.animate([
                { transform: `translateY(0) rotate(0deg)` },
                { transform: `translateY(110vh) rotate(${Math.random()*360}deg)` }
            ], { duration: duration, fill: 'forwards' });

            setTimeout(() => conf.remove(), duration);
        }

        function createLovePopup() {
            const popup = document.createElement('div');
            popup.classList.add('love-popup');
            popup.innerText = loveMessages[Math.floor(Math.random() * loveMessages.length)];
            
            // Random Position
            const x = Math.random() * (window.innerWidth - 150);
            const y = Math.random() * (window.innerHeight - 50);
            
            popup.style.left = x + 'px';
            popup.style.top = y + 'px';
            
            // Random Rotation
            const rot = (Math.random() * 20) - 10;
            popup.style.transform = `rotate(${rot}deg) scale(0)`;
            
            document.body.appendChild(popup);
            
            // Remove after 4 seconds so browser doesn't crash
            setTimeout(() => popup.remove(), 4000);
        }

        function createParticles() {
            const icons = ['üêº', 'üíñ', 'üçí', '‚ú®'];
            for (let i = 0; i < 20; i++) {
                const el = document.createElement('div');
                el.classList.add('floater');
                el.innerText = icons[Math.floor(Math.random() * icons.length)];
                el.style.left = Math.random() * 100 + '%';
                el.style.top = Math.random() * 100 + '%';
                el.style.fontSize = (Math.random() * 20 + 20) + 'px';
                el.style.animationDuration = (Math.random() * 10 + 10) + 's';
                el.style.animationDelay = (Math.random() * 5) + 's';
                bgLayer.appendChild(el);
            }
        }

        createParticles();

    </script>
</body>
</html>