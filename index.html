<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Rafa üíñ</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Gaegu:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-pink: #ff8fa3;
            --deep-red: #ff4d6d;
            --soft-peach: #ffe5ec;
            --lavender: #c7ceea;
            --text-color: #590d22;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Fredoka', sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-color);
            position: relative;
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Floating Background Particles */
        .bg-particle {
            position: absolute;
            pointer-events: none;
            z-index: 0;
            opacity: 0.6;
            animation: floatUp linear infinite;
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.5));
        }

        @keyframes floatUp {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.7; }
            90% { opacity: 0.7; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        /* Main Card */
        .container {
            position: relative;
            z-index: 10;
            text-align: center;
            width: 90%;
            max-width: 600px;
            padding: 20px;
            /* Glass effect to make text readable */
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(5px);
            border-radius: 20px;
        }

        h1 {
            font-family: 'Gaegu', cursive;
            font-size: clamp(2.5rem, 6vw, 4rem);
            margin-bottom: 10px;
            line-height: 1.1;
            text-shadow: 2px 2px 0px #fff;
            color: var(--deep-red);
        }

        .highlight-name {
            color: #fff;
            -webkit-text-stroke: 1px var(--deep-red);
            text-shadow: 3px 3px 0px var(--deep-red);
        }

        /* Mascot */
        .mascot {
            font-size: clamp(80px, 18vw, 130px);
            margin: 20px 0;
            display: inline-block;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.15));
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }
        
        .mascot:active {
            transform: scale(0.9);
        }

        /* Buttons Area */
        .buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            min-height: 100px; 
            width: 100%;
            position: relative;
        }

        button {
            border: none;
            border-radius: 50px;
            padding: 15px 30px;
            font-family: 'Fredoka', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 6px 0 rgba(0,0,0,0.15);
            white-space: nowrap;
            /* Prevent text selection */
            -webkit-user-select: none;
            user-select: none;
        }

        button:active {
            transform: translateY(4px);
            box-shadow: 0 3px 0 rgba(0,0,0,0.15);
        }

        .btn-yes {
            background-color: var(--deep-red);
            color: white;
            z-index: 100; /* High priority */
        }

        .btn-no {
            background-color: white;
            color: var(--text-color);
            border: 3px solid var(--deep-red);
            z-index: 200; /* Highest priority to ensure visibility */
            transition: all 0.1s ease-out; /* Snap quickly */
            position: relative; /* Starts relative, becomes fixed */
            max-width: 90vw; /* Prevent overflow on small screens */
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Wiggle Animation for NO button */
        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }

        .wiggle {
            animation: wiggle 0.3s ease-in-out;
        }

        /* Celebration Screen */
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, #ff9a9e 0%, #ff4d6d 100%);
            z-index: 300;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
        }

        .celebration.active {
            opacity: 1;
            pointer-events: auto;
        }

        .celebration h1 {
            color: white;
            font-size: clamp(3rem, 8vw, 5rem);
            animation: bounceIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
            margin: 0 20px;
            text-shadow: 4px 4px 0px rgba(0,0,0,0.1);
        }

        .celebration p {
            color: white;
            font-size: 2rem;
            margin-top: 10px;
            font-family: 'Gaegu', cursive;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); opacity: 0; }
            60% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Transition Text */
        .transition-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            color: white;
            font-weight: bold;
            z-index: 250;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
            text-shadow: 0 4px 10px rgba(0,0,0,0.2);
            font-family: 'Gaegu', cursive;
        }

    </style>
</head>
<body>

    <div id="bg-container"></div>

    <div class="container" id="main-card">
        <h1>Rafa...<br>Will you be my<br><span class="highlight-name">Valentine?</span></h1>
        
        <div class="mascot" id="mascot">üêº</div>

        <div class="buttons" id="btn-container">
            <button class="btn-yes" id="btn-yes">YES üíò</button>
            <button class="btn-no" id="btn-no">NO üôÑ</button>
        </div>
    </div>

    <div class="transition-text" id="transition-text">Ahh... that's better.</div>

    <div class="celebration" id="celebration-screen">
        <h1>HAPPY VALENTINE'S DAY üíñ</h1>
        <p>I love you Rafa</p>
        <div class="mascot" style="margin-top: 30px; animation: wiggle 2s infinite;">üçíüêº‚ú®</div>
    </div>

    <script>
        // --- 30 CHAOTIC PHRASES ---
        const phrases = [
            "Rafa‚Ä¶‚Ä¶‚Ä¶????",
            "You seriously clicked no?",
            "My villain arc starting...",
            "Rafa.exe stopped working",
            "Wrong answer",
            "üíÄüíÄüíÄ",
            "This has to be a joke",
            "Try again... slowly",
            "Not an option bestie",
            "Are you feeling okay?",
            "I‚Äôm telling your mom",
            "That button is broken",
            "Don't be mean",
            "Error 404: Logic not found",
            "Side eye...",
            "Unbelievable",
            "I'm crying rn",
            "You missed the Yes button",
            "Stop playing w/ my feelings",
            "That hurt my soul",
            "Wow. Just wow.",
            "RUDE.",
            "I'll ask again...",
            "Playing hard to get?",
            "Say yes already",
            "Emotional Damage",
            "FBI open up",
            "Blocked and reported",
            "Cringe.",
            "Have you lost your mind?"
        ];

        // --- EMOJIS FOR NO CLICKS ---
        const sadEmojis = ["ü•∫", "üíî", "üíÄ", "üò†", "üò≠", "üòí", "üòê", "ü´£", "üò§", "üëª", "ü§°", "üòë"];
        
        // --- STICKERS FOR BACKGROUND ---
        const stickers = ['üêº', 'üíñ', 'üçí', '‚ú®', 'üå∏', 'üíå', 'üç¨', 'üéÄ', 'üß∏'];

        const yesButton = document.getElementById('btn-yes');
        const noButton = document.getElementById('btn-no');
        const mascot = document.getElementById('mascot');
        const mainCard = document.getElementById('main-card');
        
        let yesScale = 1;
        let clickCount = 0;

        // --- AUDIO (Safe browser friendly) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            if (type === 'error') {
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(150, audioCtx.currentTime);
                oscillator.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.1);
            } else {
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(400, audioCtx.currentTime);
                oscillator.frequency.linearRampToValueAtTime(600, audioCtx.currentTime + 0.1);
            }
            
            gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.3);
        }

        // --- NO BUTTON LOGIC ---
        noButton.addEventListener('click', (e) => {
            e.preventDefault(); // Stop default browser behaviors
            e.stopPropagation(); 
            playSound('error');

            clickCount++;

            // 1. Change Text
            let textIndex = (clickCount - 1) % phrases.length;
            noButton.innerText = phrases[textIndex];
            
            // 2. Calculate Random Position (Safe Bounds)
            // We get screen dimensions and button dimensions
            const btnRect = noButton.getBoundingClientRect();
            const winWidth = window.innerWidth;
            const winHeight = window.innerHeight;
            
            // Allow button to exist anywhere from 20px to (Screen - ButtonWidth - 20px)
            const padding = 20;
            const maxLeft = winWidth - btnRect.width - padding;
            const maxTop = winHeight - btnRect.height - padding;

            // Generate random positions ensuring they are positive
            const randomLeft = Math.max(padding, Math.floor(Math.random() * maxLeft));
            const randomTop = Math.max(padding, Math.floor(Math.random() * maxTop));
            
            // Apply position
            noButton.style.position = 'fixed'; // Breaks out of layout flow
            noButton.style.left = randomLeft + 'px';
            noButton.style.top = randomTop + 'px';
            
            // 3. Wiggle Animation
            noButton.classList.remove('wiggle');
            void noButton.offsetWidth; // Trigger reflow
            noButton.classList.add('wiggle');

            // 4. Update Mascot
            mascot.innerText = sadEmojis[clickCount % sadEmojis.length];

            // 5. Grow YES Button
            yesScale += 0.2;
            yesButton.style.transform = `scale(${yesScale})`;
        });

        // --- YES BUTTON LOGIC ---
        yesButton.addEventListener('click', () => {
            playSound('success');
            
            mainCard.style.transition = 'opacity 0.5s';
            mainCard.style.opacity = '0';
            mainCard.style.pointerEvents = 'none';
            // Hide No button specifically so it doesn't float over celebration
            noButton.style.display = 'none';

            const transText = document.getElementById('transition-text');
            transText.style.opacity = '1';

            setTimeout(() => {
                transText.style.opacity = '0';
                startCelebration();
            }, 1200);
        });

        // --- BACKGROUND GENERATOR ---
        function createBackgroundElements() {
            const container = document.getElementById('bg-container');
            // Remove old particles if any
            container.innerHTML = '';
            
            for (let i = 0; i < 20; i++) {
                const el = document.createElement('div');
                el.classList.add('bg-particle');
                el.innerText = stickers[Math.floor(Math.random() * stickers.length)];
                
                // Random positions
                el.style.left = Math.random() * 100 + 'vw';
                el.style.animationDuration = (Math.random() * 10 + 10) + 's';
                el.style.fontSize = (Math.random() * 2 + 1) + 'rem';
                
                container.appendChild(el);
            }
        }

        // --- CELEBRATION ---
        function startCelebration() {
            document.getElementById('celebration-screen').classList.add('active');
            setInterval(createConfetti, 50);
            setInterval(() => createFloatingEmoji('üçí'), 200);
            setInterval(() => createFloatingEmoji('üíñ'), 150);
        }

        function createConfetti() {
            const colors = ['#ff8fa3', '#fff', '#ffd700', '#c7ceea', '#ff4d6d'];
            const confetti = document.createElement('div');
            confetti.style.position = 'fixed';
            confetti.style.width = '12px';
            confetti.style.height = '12px';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.top = '-10px';
            confetti.style.borderRadius = '50%';
            confetti.style.zIndex = '400';
            confetti.style.animation = `fall ${Math.random() * 2 + 2}s linear forwards`;
            
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 4000);
        }

        function createFloatingEmoji(emoji) {
            const el = document.createElement('div');
            el.innerText = emoji;
            el.style.position = 'fixed';
            el.style.left = Math.random() * 100 + 'vw';
            el.style.top = '105vh';
            el.style.fontSize = Math.random() * 2 + 1 + 'rem';
            el.style.transition = 'transform 4s linear, opacity 4s ease';
            el.style.opacity = '1';
            el.style.zIndex = '400';
            
            document.body.appendChild(el);

            requestAnimationFrame(() => {
                el.style.transform = `translateY(-120vh) rotate(${Math.random() * 360}deg)`;
                el.style.opacity = '0';
            });
            setTimeout(() => el.remove(), 4000);
        }

        // Add keyframe for falling confetti dynamically
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes fall {
                to { transform: translateY(110vh) rotate(720deg); }
            }
        `;
        document.head.appendChild(styleSheet);

        createBackgroundElements();
    </script>
</body>
</html>